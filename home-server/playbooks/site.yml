---
# Main orchestration playbook for home server setup
# Usage: ansible-playbook playbooks/site.yml

- name: Configure home servers
  hosts: homeservers
  gather_facts: true

  roles:
    - role: cockpit
      tags: ['cockpit', 'monitoring']

    - role: nginx
      tags: ['nginx', 'proxy']

    - role: adguard_home
      tags: ['adguard', 'dns']

    - role: filebrowser
      tags: ['filebrowser', 'files']

    - role: jellyfin
      tags: ['jellyfin', 'media']

    - role: cloud_torrent
      tags: ['cloud-torrent', 'torrent', 'media']

    - role: immich
      tags: ['immich', 'photos']

    - role: kavita
      tags: ['kavita', 'books', 'reading']

    - role: orcaslicer
      tags: ['orcaslicer', '3dprint', 'slicer']

    - role: home_assistant
      tags: ['home_assistant', 'automation', 'smart-home']

    - role: service_maintenance
      tags: ['service_maintenance', 'watchdog']

    - role: firewall
      tags: ['firewall']
      when: firewall_enabled | default(true)

---
# Default variables for Immich role

# Service user configuration
immich_user: ndelucca
immich_group: ndelucca
immich_uid: 1000  # Obtained dynamically via getent in preflight

# Directory configuration
immich_base_dir: /srv/immich
immich_upload_location: "{{ immich_base_dir }}/library"
immich_db_data_location: "{{ immich_base_dir }}/postgres"
immich_config_dir: "{{ immich_base_dir }}/config"
immich_model_cache: "{{ immich_base_dir }}/model-cache"

# Podman configuration
immich_podman_user: "{{ immich_user }}"
immich_pod_name: immich
immich_quadlet_dir: /etc/containers/systemd/users  # System-managed user containers

# Network configuration
immich_port: 2283
immich_host: 127.0.0.1

# Application configuration
immich_version: release  # Can pin to specific versions like v1.117.0
immich_timezone: America/Los_Angeles

# Database configuration
immich_db_username: immich
immich_db_database: immich
immich_db_password: "{{ lookup('password', '/dev/null length=32 chars=ascii_letters,digits') }}"
# In production, use Ansible Vault for password or set in host_vars

# Service configuration
immich_service_name: immich-pod
immich_service_enabled: true
immich_service_state: started

# Firewall settings
immich_firewall_zone: FedoraServer
immich_firewall_enabled: false  # False because NGINX handles external access

# SELinux configuration
immich_manage_selinux: true

# Podman images
immich_server_image: "ghcr.io/immich-app/immich-server:{{ immich_version }}"
immich_ml_image: "ghcr.io/immich-app/immich-machine-learning:{{ immich_version }}"
immich_redis_image: docker.io/valkey/valkey:9-alpine
immich_postgres_image: ghcr.io/immich-app/postgres:14-vectorchord0.4.3-pgvectors0.2.0

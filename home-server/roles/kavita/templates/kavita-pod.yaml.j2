# Kavita Pod - Kubernetes YAML for Podman Quadlet
# Generated by Ansible - DO NOT EDIT MANUALLY
apiVersion: v1
kind: Pod
metadata:
  name: {{ kavita_pod_name }}
  labels:
    app: kavita
spec:
  restartPolicy: Always

  containers:
  - name: kavita
    image: {{ kavita_image }}
    ports:
    - containerPort: 5000
      hostPort: {{ kavita_port }}
      hostIP: {{ kavita_host }}
    env:
    - name: TZ
      value: "{{ kavita_timezone }}"
    volumeMounts:
    - name: config
      mountPath: /kavita/config
    - name: library
      mountPath: /library
{% for lib in kavita_extra_libraries %}
    - name: extra-library-{{ loop.index }}
      mountPath: /{{ lib.name }}
{% endfor %}

  volumes:
  - name: config
    hostPath:
      path: {{ kavita_config_dir }}
      type: Directory
  - name: library
    hostPath:
      path: {{ kavita_library_dir }}
      type: Directory
{% for lib in kavita_extra_libraries %}
  - name: extra-library-{{ loop.index }}
    hostPath:
      path: {{ lib.path }}
      type: Directory
{% endfor %}

---
# Main entry point for Firewall role

- name: Ensure firewalld is installed
  ansible.builtin.dnf:
    name: firewalld
    state: present
  become: true

- name: Ensure firewalld is running
  ansible.builtin.systemd:
    name: firewalld
    state: started
    enabled: true
  become: true

- name: Configure firewall for Cockpit
  ansible.builtin.import_tasks: cockpit.yml
  when: cockpit_firewall_enabled | default(true)
  tags: ['firewall-cockpit']

- name: Configure firewall for AdGuard Home
  ansible.builtin.import_tasks: adguard.yml
  when: adguard_firewall_enabled | default(true)
  tags: ['firewall-adguard']
